image: docker:20.10.16

pipelines:
  branches:
    main:
      - step:
          name: Build and Push Docker Image (Anarock Admin)
          services:
            - docker
          script:
            - echo "ğŸ” Checking out code..."
            - echo "ğŸ³ Logging in to Docker Hub..."
            - docker login -u "$DOCKER_USER" -p "$DOCKER_PASSWORD"

            - echo "ğŸ—ï¸ Building Docker image..."
            - docker build -t "$DOCKER_USER/anarock_admin:3.0" .

            - echo "ğŸ“¤ Pushing Docker image to Docker Hub..."
            - docker push "$DOCKER_USER/anarock_admin:3.0"

definitions:
  services:
    docker:
      memory: 2048
